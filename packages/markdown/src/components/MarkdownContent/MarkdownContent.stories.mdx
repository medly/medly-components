import { MarkdownContent } from './MarkdownContent';
import { Preview, Story, Meta, Props } from '@storybook/addon-docs/blocks';
import {
    testMarkdownData,
    headings,
    emphasis,
    blockquotes,
    lists,
    code,
    tables,
    links,
    images,
    footnotes,
    youtube
} from './testMarkdownData';

<Meta title="Markdown" component={MarkdownContent} />

# MarkdownContent

You can use this component to render markdown content.

## Example

```tsx
import { MarkdownContent } from '@medly-components/markdown';
import { FC } from 'react';

export const Component: FC = () => <MarkdownContent content={'# DummyHeading'} />;
```

> **Note**: If you're using Webpack 5, you'll need to add the Webpack config and the following dependency: `yarn add util assert buffer process`.

```json
{
    "resolve": {
        "fallback": { "util": require.resolve("util/"), "assert": require.resolve("assert/"), "buffer": require.resolve("buffer/") }
    },
    "plugins": [
        new webpack.ProvidePlugin({
            "process": "process/browser"
        })
    ],
    "ignoreWarnings": [/Critical dependency: the request of a dependency is an expression/]
}
```

> **Note**: If you're using jest for testing, you'll need to mock the `@medly-components/markdown`. Since `react-markdown` is a pure ESM module and Jest ships with experimental support for ECMAScript Module, we are facing issues with writing tests. We are looking for proper solution. You can read more about it [here](https://jestjs.io/docs/ecmascript-modules).

```jsx
const DummyComponent: React.FC<{ content: string }> = ({ content }) => <>{content}</>;
DummyComponent.displayName = 'DummyComponent';

jest.mock('@medly-components/markdown', () => ({
    MarkdownContent: DummyComponent
}));
```

## Props

This component offers the following props mentioned in the table below:

<Props of={MarkdownContent} />

## Syntax Guide

The markdown contains various ways to format your content.

### Features

-   [Headings](#headings)
-   [Emphasis](#emphasis)
-   [Blockqotes](#blockquotes)
-   [Lists](#lists)
-   [Code](#code)
-   [Tables](#tables)
-   [Links](#links)
-   [Images](#images)
-   [Youtube](#youtube)
-   [Footnotes](#footnotes)

### Headings

```md
# h1 Heading

## h2 Heading

### h3 Heading

#### h4 Heading

##### h5 Heading

###### h6 Heading
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={headings} />
</Preview>

### Emphasis

```md
**This is bold text**

**This is bold text**

_This is italic text_

_This is italic text_

~~Strikethrough~~
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={emphasis} />
</Preview>

### Blockquotes

<!-- prettier-ignore -->
```md
> Blockquotes can also be nested...
>> ...by using additional greater-than signs right next to each other...
> > > ...or with spaces between arrows.
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={blockquotes} />
</Preview>

### Lists

```md
Unordered

-   Create a list by starting a line with `+`, `-`, or `*`
-   Sub-lists are made by indenting 2 spaces:
    -   Marker character change forces new list start:
        -   Ac tristique libero volutpat at
        *   Facilisis in pretium nisl aliquet
        -   Nulla volutpat aliquam velit
-   Very easy!

Ordered

1. Lorem ipsum dolor sit amet
2. Consectetur adipiscing elit
3. Integer molestie lorem at massa

1) You can use sequential numbers...
1) ...or keep all the numbers as \`1.\`

Start numbering with offset:

57. foo
1. bar
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={lists} />
</Preview>

### Code

```md
Inline \`code\`

Indented code

    // Some comments
    line 1 of code
    line 2 of code
    line 3 of code

Block code "fences"

\`\`\`
Sample text here...
\`\`\`

Syntax highlighting

\`\`\` js
var foo = function (bar) {
return bar++;
};

console.log(foo(5));
\`\`\`
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={code} />
</Preview>

### Tables

```md
| Option | Description                                                               |
| ------ | ------------------------------------------------------------------------- |
| data   | path to data files to supply the data that will be passed into templates. |
| engine | engine to be used for processing templates. Handlebars is the default.    |
| ext    | extension to be used for dest files.                                      |

Right aligned columns

| Option |                                                               Description |
| -----: | ------------------------------------------------------------------------: |
|   data | path to data files to supply the data that will be passed into templates. |
| engine |    engine to be used for processing templates. Handlebars is the default. |
|    ext |                                      extension to be used for dest files. |
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={tables} />
</Preview>

### Links

```md
[link text](http://dev.nodeca.com)

[link with title](http://nodeca.github.io/pica/demo/ 'title text!')

Autoconverted link https://github.com/nodeca/pica (enable linkify to see)
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={links} />
</Preview>

### Images

```md
![Minion](https://octodex.github.com/images/minion.png)
![Stormtroopocat](https://octodex.github.com/images/stormtroopocat.jpg 'The Stormtroopocat')

Like links, Images also have a footnote style syntax

![Alt text][id]

With a reference later in the document defining the URL location:

[id]: https://octodex.github.com/images/dojocat.jpg 'The Dojocat'
```

<Preview withToolbar>
    <MarkdownContent content={images} />
</Preview>

The above markdown content will get rendered as follows:

### Youtube

```md
:youtube[https://www.youtube.com/watch?v=fl52_XdT-Kg&ab_channel=MedlyPharmacy]
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={youtube} />
</Preview>

### Footnotes

```md
Footnote 1 link[^first].

Footnote 2 link[^second].

Duplicated footnote reference[^second].

[^first]: Footnote **can have markup**

    and multiple paragraphs.

[^second]: Footnote text.
```

The above markdown content will get rendered as follows:

<Preview withToolbar>
    <MarkdownContent content={footnotes} />
</Preview>

### Basic content component

<Preview withToolbar>
    <Story name="MarkdownContent">
        <MarkdownContent content={testMarkdownData} />
    </Story>
</Preview>

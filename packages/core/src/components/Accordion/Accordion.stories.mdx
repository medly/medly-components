import { Preview, Story, Meta, Props } from '@storybook/addon-docs/blocks';
import { withKnobs } from '@storybook/addon-knobs';
import { defaultTheme } from '@medly-components/theme';
import { Accordion } from './Accordion.tsx';
import { AccordionWithActiveStateFromOutside } from './Accordion.stories';
import { Button } from '@medly-components/core';
import Text from '../Text';
import { useState } from 'react';

<Meta title="Core" component={Accordion} parameters={{ jest: ['Accordion.test.tsx'] }} />

# Accordion

An accordion is a vertically stacked set of interactive headings, which contain a title or content snippet representing a section of content. It hides a lot of content and rolls it up.
It consists of two children components: `Accordion.Header` and `Accordion.Content`, which are just wrapper components. You can pass any component as children to `Accordion.Header` and `Accordion.Content`.

<Preview withToolbar>
    <Story name="Accordion">
        <Accordion>
            <Accordion.Header>
                <div style={{ backgroundColor: '#e6effd', padding: `1.8rem` }}>
                    <Text>Header</Text>
                </div>
            </Accordion.Header>
            <Accordion.Content>
                <div style={{ backgroundColor: '#ecfbf9', padding: `1.8rem` }}>
                    <Text>Content</Text>
                </div>
            </Accordion.Content>
        </Accordion>
    </Story>
</Preview>

## Handle the active state from outside

You can provide the `active` and `onChange` props to handle the active state from outside.

<Preview>
    <AccordionWithActiveStateFromOutside />
</Preview>

## Default active state

You can pass the `defaultActive` prop to initialize the active state.

<Preview withToolbar>
    <Accordion defaultActive={true}>
        <Accordion.Header>
            <div style={{ backgroundColor: '#e6effd', padding: `1.8rem` }}>
                <Text>Header</Text>
            </div>
        </Accordion.Header>
        <Accordion.Content>
            <div style={{ backgroundColor: '#ecfbf9', padding: `1.8rem` }}>
                <Text>Content</Text>
            </div>
        </Accordion.Content>
    </Accordion>
</Preview>


## Context

We have also exposed `Accordion.Context` to enable finding the latest active state. 
Use the Accordion Context as mentioned below:

```tsx
const [isActive, setActiveState] = useContext(Accordion.Context);
```

## Type 

Use the Accordion Context type as mentioned below:

```tsx
export type AccordionContextType = [
    boolean /** Current active state */,
    React.Dispatch<React.SetStateAction<boolean>> /** Function to be called to toggle the active state */
];
```

## Props

This component offers the following props mentioned in the table below:

<Props of={Accordion} />
